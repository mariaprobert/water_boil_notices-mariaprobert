<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>water_boil_notices-mariaprobert - Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">water_boil_notices-mariaprobert</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./01-cleaning.html"> 
<span class="menu-text">Cleaning</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#goals" id="toc-goals" class="nav-link active" data-scroll-target="#goals">Goals</a></li>
  <li><a href="#importing-clean-data" id="toc-importing-clean-data" class="nav-link" data-scroll-target="#importing-clean-data">Importing Clean Data</a></li>
  <li><a href="#what-counties-andor-regions-have-the-most-amount-of-water-boil-notices" id="toc-what-counties-andor-regions-have-the-most-amount-of-water-boil-notices" class="nav-link" data-scroll-target="#what-counties-andor-regions-have-the-most-amount-of-water-boil-notices">What counties and/or regions have the most amount of water boil notices?</a></li>
  <li><a href="#what-counties-andor-regions-have-the-longest-lasting-water-boil-notices" id="toc-what-counties-andor-regions-have-the-longest-lasting-water-boil-notices" class="nav-link" data-scroll-target="#what-counties-andor-regions-have-the-longest-lasting-water-boil-notices">What counties and/or regions have the longest lasting water boil notices?</a></li>
  <li><a href="#what-do-ongoing-water-boil-notices-look-like" id="toc-what-do-ongoing-water-boil-notices-look-like" class="nav-link" data-scroll-target="#what-do-ongoing-water-boil-notices-look-like">What do ongoing water boil notices look like?</a></li>
  <li><a href="#what-are-the-most-common-reasons-for-water-boil-notices-are-these-statewide-or-localized-problems" id="toc-what-are-the-most-common-reasons-for-water-boil-notices-are-these-statewide-or-localized-problems" class="nav-link" data-scroll-target="#what-are-the-most-common-reasons-for-water-boil-notices-are-these-statewide-or-localized-problems">What are the most common reasons for water boil notices? Are these statewide or localized problems?</a></li>
  <li><a href="#how-many-people-in-texas-are-affected-by-water-boil-notices-each-year" id="toc-how-many-people-in-texas-are-affected-by-water-boil-notices-each-year" class="nav-link" data-scroll-target="#how-many-people-in-texas-are-affected-by-water-boil-notices-each-year">How many people in Texas are affected by water boil notices each year?</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analysis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="goals" class="level2">
<h2 class="anchored" data-anchor-id="goals">Goals</h2>
<p>The goal of this analysis is to find for data outliers, interesting localized pieces of data or anything that jumps out as interesting. Specifically, since I’m focusing on water boil notices, I want to identify anything that can lead to a potential story.</p>
<p>Questions for analysis:</p>
<ul>
<li>What counties and/or regions have the most amount of water boil notices?</li>
<li>What counties and/or regions have the longest lasting water boil notices?</li>
<li>What do ongoing water boil notices look like?</li>
<li>What are the most common reasons for water boil notices? Are these statewide or localized problems?</li>
<li>How many people in Texas are affected by water boil notices each year?</li>
</ul>
<p>##Loading up tidyverse</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="importing-clean-data" class="level2">
<h2 class="anchored" data-anchor-id="importing-clean-data">Importing Clean Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data-processed/01-water_boil.rds"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>water_boil </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,655 × 17
   issued              rescinded           notice_length pws_id    pws_name     
   &lt;dttm&gt;              &lt;dttm&gt;              &lt;drtn&gt;        &lt;chr&gt;     &lt;chr&gt;        
 1 2023-12-31 00:00:00 2024-01-01 00:00:00  1 days       TX1460136 DAYTON OAKS …
 2 2023-12-31 00:00:00 2024-01-04 00:00:00  4 days       TX1830025 DEADWOOD WSC 
 3 2023-12-30 00:00:00 2024-01-02 00:00:00  3 days       TX0140006 CITY OF KILL…
 4 2023-12-30 00:00:00 2024-01-03 00:00:00  4 days       TX0960001 RRA ESTELLIN…
 5 2023-12-30 00:00:00 2024-01-01 00:00:00  2 days       TX1012133 HARRIS COUNT…
 6 2023-12-30 00:00:00 2024-01-03 00:00:00  4 days       TX1020081 GUM SPRINGS …
 7 2023-12-29 00:00:00 2024-01-06 00:00:00  8 days       TX0040003 COPANO COVE …
 8 2023-12-29 00:00:00 2024-01-03 00:00:00  5 days       TX1600001 CITY OF MASON
 9 2023-12-29 00:00:00 2024-01-10 00:00:00 12 days       TX1740005 APPLEBY WSC  
10 2023-12-29 00:00:00 2024-01-04 00:00:00  6 days       TX1740010 D &amp; M WSC    
# ℹ 6,645 more rows
# ℹ 12 more variables: population &lt;dbl&gt;, pws_type &lt;chr&gt;, reason_activity &lt;chr&gt;,
#   reason &lt;chr&gt;, affected_area_activity &lt;chr&gt;, affected_area &lt;chr&gt;,
#   responsible_party &lt;chr&gt;, comments &lt;chr&gt;, region &lt;chr&gt;, county &lt;chr&gt;,
#   reissued_count &lt;dbl&gt;, nature &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="what-counties-andor-regions-have-the-most-amount-of-water-boil-notices" class="level2">
<h2 class="anchored" data-anchor-id="what-counties-andor-regions-have-the-most-amount-of-water-boil-notices">What counties and/or regions have the most amount of water boil notices?</h2>
<p>Counties:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county) <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(appearances))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 223 × 2
   county     appearances
   &lt;chr&gt;            &lt;int&gt;
 1 HARRIS             725
 2 MONTGOMERY         357
 3 BELL               309
 4 BRAZORIA           258
 5 HOUSTON            246
 6 TRAVIS             232
 7 POLK               164
 8 LIBERTY            131
 9 HARRISON           129
10 CHEROKEE           116
# ℹ 213 more rows</code></pre>
</div>
</div>
<p>Regions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">|&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(appearances))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 2
   region appearances
   &lt;chr&gt;        &lt;int&gt;
 1 12            1716
 2 10            1065
 3 5              920
 4 9              708
 5 4              678
 6 11             443
 7 3              373
 8 13             225
 9 14             108
10 1               97
11 16              80
12 2               74
13 6               45
14 7               43
15 8               43
16 15              37</code></pre>
</div>
</div>
<p>Based on quick Google searches, the county with the most amount of water boil notices is Harris county (Houston area), Montgomery (area above Houston), Bell (which makes up Temple, Killeen, et.), and in fourth place is Brazoria county (South of Houston). This leads me to think that region 12 according to TCEQ probably encapsulates East Texas.</p>
<p>Data Takeaways: East Texas or the area near Houston is the area in Texas with the most amount of water boil notices. According to Texas Tribune, could be due to aging infrastructure (humidity?), flood issues and/or a large population.</p>
<p>More information here: https://www.texastribune.org/2022/12/07/boil-water-notices-rural-texas/</p>
</section>
<section id="what-counties-andor-regions-have-the-longest-lasting-water-boil-notices" class="level2">
<h2 class="anchored" data-anchor-id="what-counties-andor-regions-have-the-longest-lasting-water-boil-notices">What counties and/or regions have the longest lasting water boil notices?</h2>
<p>I want to look at the counties with the longest lasting notice lengths, so let’s look at the average to determine the county with the longest lasting notices. Then, I also want to record the minimum and maximum amount of days that water boil notices last in each county.</p>
<p>Counties (last 2 *** ERROS?!):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county) <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">average_notice_length =</span> <span class="fu">mean</span>(notice_length, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_notice_length =</span> <span class="fu">min</span>(notice_length, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_notice_length =</span> <span class="fu">max</span>(notice_length, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(average_notice_length)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 4 warnings in `summarize()`.
The first warning was:
ℹ In argument: `min_notice_length = min(notice_length, na.rm = TRUE)`.
ℹ In group 194: `county = "TERRY"`.
Caused by warning in `min()`:
! no non-missing arguments to min; returning Inf
ℹ Run `dplyr::last_dplyr_warnings()` to see the 3 remaining warnings.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 223 × 4
   county        average_notice_length min_notice_length max_notice_length
   &lt;chr&gt;         &lt;drtn&gt;                &lt;drtn&gt;            &lt;drtn&gt;           
 1 LIVE OAK      219.00000 days         3 days           366 days         
 2 DUVAL         170.00000 days         5 days           335 days         
 3 TITUS         125.00000 days         2 days           370 days         
 4 WOOD          114.57143 days         1 days           759 days         
 5 KENT           60.60000 days         3 days           271 days         
 6 GREGG          49.68182 days         1 days           493 days         
 7 COLLINGSWORTH  48.20000 days         2 days           223 days         
 8 DICKENS        48.00000 days         1 days           182 days         
 9 BRAZOS         40.77778 days         1 days           234 days         
10 PRESIDIO       38.00000 days        38 days            38 days         
# ℹ 213 more rows</code></pre>
</div>
</div>
<p>None of the top three counties with longest lasting water boil notices show up in the top of the list of most water boil notices. But this makes sense. East Austin has a higher population, therefore a higher demand for water and therefore a higher demand for water boil notices to get resolved.</p>
<p>Let’s look at Live Oak more closely:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  county <span class="sc">==</span> <span class="st">"LIVE OAK"</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(county, population, issued, rescinded, notice_length, reason_activity, reason, affected_area_activity, affected_area, pws_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 10
  county   population issued              rescinded           notice_length
  &lt;chr&gt;         &lt;dbl&gt; &lt;dttm&gt;              &lt;dttm&gt;              &lt;drtn&gt;       
1 LIVE OAK         80 2023-08-23 00:00:00 2024-06-06 00:00:00 288 days     
2 LIVE OAK       4428 2022-01-25 00:00:00 2022-01-28 00:00:00   3 days     
3 LIVE OAK        117 2022-01-03 00:00:00 2023-01-04 00:00:00 366 days     
# ℹ 5 more variables: reason_activity &lt;chr&gt;, reason &lt;chr&gt;,
#   affected_area_activity &lt;chr&gt;, affected_area &lt;chr&gt;, pws_name &lt;chr&gt;</code></pre>
</div>
</div>
<p>Live Oak county is located South of San Antonio and has a very small population, but the water boil notices affect all residents in the area where the public water system is located. Most recent one happened in June and lasted almost a year.</p>
<p>Now, I want to look at the top three counties with the most water boil notices and check how long their water boil notices last.</p>
<p>Let’s look at Harris as an example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county) <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">average_notice_length =</span> <span class="fu">mean</span>(notice_length, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_notice_length =</span> <span class="fu">min</span>(notice_length, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_notice_length =</span> <span class="fu">max</span>(notice_length, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(average_notice_length)) <span class="sc">|&gt;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    county <span class="sc">==</span> <span class="st">"HARRIS"</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 4 warnings in `summarize()`.
The first warning was:
ℹ In argument: `min_notice_length = min(notice_length, na.rm = TRUE)`.
ℹ In group 194: `county = "TERRY"`.
Caused by warning in `min()`:
! no non-missing arguments to min; returning Inf
ℹ Run `dplyr::last_dplyr_warnings()` to see the 3 remaining warnings.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  county average_notice_length min_notice_length max_notice_length
  &lt;chr&gt;  &lt;drtn&gt;                &lt;drtn&gt;            &lt;drtn&gt;           
1 HARRIS 8.65742 days          1 days            472 days         </code></pre>
</div>
</div>
<p>When I check for Harris we get NA, which could just mean that there are still pending water boil notices so the data can’t calculate the average, minimum and maximum length of water boil notices in the area.</p>
<p>To check the length of the water boil notices that have been rescinded, I added “na.rm = TRUE.”</p>
<p>Data Takeaways:</p>
<ul>
<li>Counties with the longest lasting water boil notices tend to have smaller populations. The top two counties with the longest lasting notices are located South of San Antonio.</li>
<li>Harris county has at least one pending water boil notice at the time this data was collected.</li>
</ul>
<p>Regions:</p>
<p>Now let’s check regions with the longest lasting water boil notices:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">average_notice_length =</span> <span class="fu">mean</span>(notice_length, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_notice_length =</span> <span class="fu">min</span>(notice_length, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_notice_length =</span> <span class="fu">max</span>(notice_length, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(average_notice_length)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 4
   region average_notice_length min_notice_length max_notice_length
   &lt;chr&gt;  &lt;drtn&gt;                &lt;drtn&gt;            &lt;drtn&gt;           
 1 16     29.164557 days        2 days            335 days         
 2 15     19.054054 days        1 days            339 days         
 3 14     16.915094 days        1 days            366 days         
 4 6      15.136364 days        2 days            136 days         
 5 10     14.660664 days        1 days            792 days         
 6 5      13.520352 days        1 days            759 days         
 7 8      12.813953 days        1 days            368 days         
 8 2      12.027778 days        1 days            182 days         
 9 11     11.661400 days        1 days            614 days         
10 4      11.342900 days        1 days            477 days         
11 12      9.452311 days        1 days            472 days         
12 9       9.037196 days        1 days            621 days         
13 7       8.731707 days        1 days             40 days         
14 1       8.453608 days        1 days            223 days         
15 3       8.204301 days        1 days            487 days         
16 13      6.747706 days        1 days            173 days         </code></pre>
</div>
</div>
<p>If I don’t remove the NA examples, 12 out of the 16 regions designated by TCEQ in Texas have at least one ongoing water boil notice at the time this data was collected.</p>
<p>Data Takeaways:</p>
<ul>
<li>Region 16 could be the area around Live Oak and Duval counties. The highest average of water boil notice length is 29 days.</li>
<li>12 out of the 16 regions designated by TCEQ in Texas have at least one ongoing water boil notice at the time this data was collected.</li>
</ul>
<p>TCEQ hasn’t answered my question about what the regions are yet…</p>
</section>
<section id="what-do-ongoing-water-boil-notices-look-like" class="level2">
<h2 class="anchored" data-anchor-id="what-do-ongoing-water-boil-notices-look-like">What do ongoing water boil notices look like?</h2>
<p>The original results for the duration of the water boil notices gave us a lot of NA results, which point to water boil notices that are ongoing at the time the data was collected.</p>
<p>Let’s look at the amount of ongoing water boil notices in each county in the time span of Jan.&nbsp;2022 to the start of 2024.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">if_any</span>(<span class="fu">c</span>(rescinded, notice_length), is.na)) <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county) <span class="sc">|&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">arrange</span>(<span class="fu">desc</span>(appearances))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 42 × 2
   county    appearances
   &lt;chr&gt;           &lt;int&gt;
 1 HARRIS              4
 2 JOHNSON             4
 3 WISE                4
 4 CHEROKEE            3
 5 HENDERSON           3
 6 POLK                3
 7 BRAZOS              2
 8 BURLESON            2
 9 COMAL               2
10 DENTON              2
# ℹ 32 more rows</code></pre>
</div>
</div>
<p>Let’s look at the water boil notices in Harris:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">if_any</span>(<span class="fu">c</span>(rescinded, notice_length), is.na)) <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county) <span class="sc">|&gt;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(county <span class="sc">==</span> <span class="st">"HARRIS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 17
# Groups:   county [1]
  issued              rescinded notice_length pws_id    pws_name            
  &lt;dttm&gt;              &lt;dttm&gt;    &lt;drtn&gt;        &lt;chr&gt;     &lt;chr&gt;               
1 2023-11-15 00:00:00 NA        NA days       TX1011690 HARRIS COUNTY MUD 70
2 2023-11-08 00:00:00 NA        NA days       TX1013025 STRACK ROAD STORAGE 
3 2023-10-04 00:00:00 NA        NA days       TX1010212 BAYER WATER SYSTEM  
4 2023-04-20 00:00:00 NA        NA days       TX1013156 HARRIS COUNTY UD 16 
# ℹ 12 more variables: population &lt;dbl&gt;, pws_type &lt;chr&gt;, reason_activity &lt;chr&gt;,
#   reason &lt;chr&gt;, affected_area_activity &lt;chr&gt;, affected_area &lt;chr&gt;,
#   responsible_party &lt;chr&gt;, comments &lt;chr&gt;, region &lt;chr&gt;, county &lt;chr&gt;,
#   reissued_count &lt;dbl&gt;, nature &lt;chr&gt;</code></pre>
</div>
</div>
<p>Let’s add up the population affected by ongoing water notices in Harris county:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">if_any</span>(<span class="fu">c</span>(rescinded, notice_length), is.na)) <span class="sc">|&gt;</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county) <span class="sc">|&gt;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(county <span class="sc">==</span> <span class="st">"HARRIS"</span>) <span class="sc">|&gt;</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">harris_population_notice =</span> <span class="fu">sum</span>(population))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  county harris_population_notice
  &lt;chr&gt;                     &lt;dbl&gt;
1 HARRIS                    13594</code></pre>
</div>
</div>
<p>Data Takeaways: In Harris county at the time that this data was collected at least 13,594 people were affected by water boil notices.</p>
<p>Let’s look at the total population affected by water boil notices in each county:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">if_any</span>(<span class="fu">c</span>(rescinded, notice_length), is.na)) <span class="sc">|&gt;</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county) <span class="sc">|&gt;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">county_population_notice =</span> <span class="fu">sum</span>(population)) <span class="sc">|&gt;</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(county_population_notice))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 42 × 2
   county   county_population_notice
   &lt;chr&gt;                       &lt;dbl&gt;
 1 HARRIS                      13594
 2 SMITH                        9113
 3 MCLENNAN                     4773
 4 BURLESON                     3263
 5 ANGELINA                     2211
 6 CASS                         1888
 7 CHEROKEE                     1827
 8 RUSK                         1734
 9 WISE                         1610
10 DENTON                       1584
# ℹ 32 more rows</code></pre>
</div>
</div>
<p>Let’s try this by region and look at populations under water boil notices by region:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">if_any</span>(<span class="fu">c</span>(rescinded, notice_length), is.na)) <span class="sc">|&gt;</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">|&gt;</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">arrange</span>(<span class="fu">desc</span>(appearances))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
   region appearances
   &lt;chr&gt;        &lt;int&gt;
 1 4               16
 2 5               11
 3 10              10
 4 9                9
 5 12               7
 6 13               7
 7 14               2
 8 2                2
 9 7                2
10 16               1
11 3                1
12 6                1</code></pre>
</div>
</div>
<p>Data Takeaways: (Once I know what regions this is…) Harris should be 12.</p>
<p>Now let’s look at the total ongoing water boil notices in Texas at the time this data was collected.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">if_any</span>(<span class="fu">c</span>(rescinded, notice_length), is.na)) <span class="sc">|&gt;</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>()) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  appearances
        &lt;int&gt;
1          69</code></pre>
</div>
</div>
<p>Data Takeaways: In the state of Texas, there were at least 69 total ongoing water boil notices (in all counties and regions) at the time that this data was collected.</p>
<p>Now let’s look at the total population in Texas under ongoing water boil notices:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">if_any</span>(<span class="fu">c</span>(rescinded, notice_length), is.na)) <span class="sc">|&gt;</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">texas_population_notice =</span> <span class="fu">sum</span>(population)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  texas_population_notice
                    &lt;dbl&gt;
1                   56074</code></pre>
</div>
</div>
</section>
<section id="what-are-the-most-common-reasons-for-water-boil-notices-are-these-statewide-or-localized-problems" class="level2">
<h2 class="anchored" data-anchor-id="what-are-the-most-common-reasons-for-water-boil-notices-are-these-statewide-or-localized-problems">What are the most common reasons for water boil notices? Are these statewide or localized problems?</h2>
<p>Let’s look at the main reasons why water notices happen in the state of Texas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(reason_activity) <span class="sc">|&gt;</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(appearances))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  reason_activity                              appearances
  &lt;chr&gt;                                              &lt;int&gt;
1 BWN - LOW DISTRIBUTION PRESSURE                     4391
2 BWN - WATER OUTAGE                                  1909
3 BWN - LOW DISINFECTANT RESIDUAL DISTRIBUTION         189
4 BWN - OTHER                                           72
5 BWN - MICROBIOLOGICAL ECOLI                           57
6 BWN - TURBIDITY                                       37</code></pre>
</div>
</div>
<p>Now let’s check to see if more of these issues are systemwide or more localized problems.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(affected_area_activity) <span class="sc">|&gt;</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(appearances))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  affected_area_activity         appearances
  &lt;chr&gt;                                &lt;int&gt;
1 BWN AFFECTED AREA - SYSTEMWIDE        3636
2 BWN AFFECTED AREA - LOCALIZED         3019</code></pre>
</div>
</div>
<p>BWN stands for boil water notice.</p>
<p>Data Takeaways: Water boil notices are more related to systemwide issues, rather than localized. But, not by that much of a difference.</p>
<p>** need TCEQ response to contextualize more of this info***</p>
</section>
<section id="how-many-people-in-texas-are-affected-by-water-boil-notices-each-year" class="level2">
<h2 class="anchored" data-anchor-id="how-many-people-in-texas-are-affected-by-water-boil-notices-each-year">How many people in Texas are affected by water boil notices each year?</h2>
<p>Without including the ongoing water boil notices that we already looked at, lets look at the total population under and separating by year.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>water_boil <span class="sc">|&gt;</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">population_notice =</span> <span class="fu">sum</span>(population))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  population_notice
              &lt;dbl&gt;
1          57049113</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>