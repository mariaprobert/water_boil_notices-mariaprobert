---
title: "Analysis"
---

## Goals 

The goal of this analysis is to find for data outliers, interesting localized pieces of data or anything that jumps out as interesting. Specifically, since I'm focusing on water boil notices, I want to identify anything that can lead to a potential story. 

Questions for analysis: 

- What cities and/or counties have the most amount of water boil notices? 
- What cities and/or counties have the longest lasting water boil notices? 
- What are the most common reasons for water boil notices? Are these statewide or localized problems? 
- How many people in Texas are affected by water boil notices each year? 

##Loading up tidyverse 

```{r}
#| label: setup
#| message: false

library(tidyverse)
library(janitor)
library(readxl)
```


## Importing Clean Data 

```{r}
water_boil <- read_rds("data-processed/01-water_boil.rds")

water_boil 
```


## What cities and/or counties have the most amount of water boil notices?

Counties: 
```{r}
water_boil |>
  group_by(county) |>
  summarize(appearances = n()) |> 
  arrange(desc(appearances))
```

Regions: 
```{r}
water_boil |>
  group_by(region) |>
  summarize(appearances = n()) |> 
  arrange(desc(appearances))
```

Based on quick Google searches, the county with the most amount of water boil notices is Harris county (Houston area), Montgomery (area above Houston), Bell (which makes up Temple, Killeen, et.), and in fourth place is Brazoria county (South of Houston). This leads me to think that region 12 according to TCEQ probably encapsulates East Texas. 

Data Takeaways: East Texas or the area near Houston is the area in Texas with the most amount of water boil notices. According to Texas Tribune, could be due to aging infrastructure (humidity?), flood issues and/or a large population. 

More information here: https://www.texastribune.org/2022/12/07/boil-water-notices-rural-texas/

## What cities and/or counties have the longest lasting water boil notices? 

I want to look at the counties with the longest lasting notice lengths, so let's look at the average to determine the county with the longest lasting notices. Then, I also want to record the minimum and maximum amount of days that water boil notices last in each county. 

Counties: 
```{r}
water_boil |>
  group_by(county) |>
  summarize(
    average_notice_length = mean(notice_length),
    min_notice_length = min(notice_length), 
    max_notice_length = max(notice_length)
    ) |>
  arrange(desc(average_notice_length)) 
```

None of the top three counties with longest lasting water boil notices show up in the top of the list of most water boil notices. But this makes sense. East Austin has a higher population, therefore a higher demand for water and therefore a higher demand for water boil notices to get resolved. 

Let's look at Live Oak more closely: 


```{r}
water_boil |>
filter(
  county == "LIVE OAK"
) |>
  select(county, population, issued, rescinded, notice_length, reason_activity, reason, affected_area_activity, affected_area)

```

Live Oak county is located South of San Antonio and has a very small population, but the water boil notices affect all residents in the area where the public water system is located. Most recent one happened in June and lasted almost a year. 

Now, I want to look at the top three counties with the most water boil notices and check how long their water boil notices last. 

Let's look at Harris as an example: 

```{r}
water_boil |>
  group_by(county) |>
  summarize(
    average_notice_length = mean(notice_length),
    min_notice_length = min(notice_length), 
    max_notice_length = max(notice_length)
    ) |>
  arrange(desc(average_notice_length)) |>
  filter(
    county == "HARRIS"
  )
```

When I check for Harris we get NA, which could just mean that there are still pending water boil notices so the data can't calculate the average, minimum and maximum length of water boil notices in the area. 

Data Takeaways: 

- Counties with the longest lasting water boil notices tend to have smaller populations. The top two counties with the longest lasting notices are located South of San Antonio.
- Harris county has at least one pending water boil notice at the time this data was collected. 


Regions: 

Now let's check regions with the longest lasting water boil notices: 

```{r}
water_boil |>
  group_by(region) |>
  summarize(
    average_notice_length = mean(notice_length),
    min_notice_length = min(notice_length), 
    max_notice_length = max(notice_length)
    ) |>
  arrange(desc(average_notice_length)) 
```

Data Takeaways: 

- Region 15 could be the area around Live Oak and Duval counties. The longest lasting water boil notice in that region is 339 days. The average length of water boil notices in region 15 is 19 days. 
- 12 out of the 16 regions designated by TCEQ in Texas have at least one ongoing water boil notice at the time this data was collected. 

TCEQ hasn't answered my question about what the regions are yet...

